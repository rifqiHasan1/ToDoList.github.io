<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TaskMaster Pro - Ultimate To-Do List</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#f0f9ff',
                            100: '#e0f2fe',
                            200: '#bae6fd',
                            300: '#7dd3fc',
                            400: '#38bdf8',
                            500: '#0ea5e9',
                            600: '#0284c7',
                            700: '#0369a1',
                            800: '#075985',
                            900: '#0c4a6e',
                        },
                        secondary: {
                            50: '#f5f3ff',
                            100: '#ede9fe',
                            200: '#ddd6fe',
                            300: '#c4b5fd',
                            400: '#a78bfa',
                            500: '#8b5cf6',
                            600: '#7c3aed',
                            700: '#6d28d9',
                            800: '#5b21b6',
                            900: '#4c1d95',
                        },
                    },
                    fontFamily: {
                        'sans': ['"Inter"', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }
        
        /* Background pattern */
        body::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                radial-gradient(at 10% 20%, rgba(14, 165, 233, 0.15) 0px, transparent 50%),
                radial-gradient(at 90% 10%, rgba(139, 92, 246, 0.15) 0px, transparent 50%),
                radial-gradient(at 30% 80%, rgba(239, 68, 68, 0.1) 0px, transparent 50%),
                radial-gradient(at 70% 90%, rgba(16, 185, 129, 0.1) 0px, transparent 50%);
            background-size: 200% 200%;
            z-index: -1;
            animation: gradientBackground 20s ease infinite;
        }
        
        @keyframes gradientBackground {
            0% { background-position: 0% 0%; }
            50% { background-position: 100% 100%; }
            100% { background-position: 0% 0%; }
        }
        
        /* Floating particles */
        .particle {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.8);
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.8);
            z-index: -1;
            animation: floatParticle linear infinite;
        }
        
        @keyframes floatParticle {
            0% { transform: translateY(0) translateX(0); opacity: 1; }
            100% { transform: translateY(-100vh) translateX(20px); opacity: 0; }
        }
        
        /* Glassmorphism effect */
        .glass-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.18);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.1);
            transition: all 0.3s ease;
        }
        
        .glass-card:hover {
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.2);
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: rgba(241, 241, 241, 0.5);
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: rgba(136, 136, 136, 0.5);
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: rgba(85, 85, 85, 0.6);
        }
        
        /* Pulse animation for urgent tasks */
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(239, 68, 68, 0); }
            100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0); }
        }
        .urgent-task {
            animation: pulse 2s infinite;
        }
        
        /* Floating action button animation */
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-5px); }
            100% { transform: translateY(0px); }
        }
        .floating-btn {
            animation: float 3s ease-in-out infinite;
        }
        
        /* Custom checkbox */
        .custom-checkbox {
            appearance: none;
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border: 2px solid #0ea5e9;
            border-radius: 6px;
            outline: none;
            cursor: pointer;
            position: relative;
            transition: all 0.2s ease;
        }
        .custom-checkbox:checked {
            background-color: #0ea5e9;
            border-color: #0ea5e9;
        }
        .custom-checkbox:checked::after {
            content: '\2713';
            position: absolute;
            color: white;
            font-size: 14px;
            left: 3px;
            top: -1px;
        }
        
        /* Gradient text */
        .gradient-text {
            background: linear-gradient(90deg, #0ea5e9 0%, #8b5cf6 100%);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        /* Task card hover effect */
        .task-card {
            transition: all 0.3s ease;
            transform-origin: center;
        }
        .task-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.08);
        }
        
        /* Input focus effect */
        .focus-effect:focus {
            box-shadow: 0 0 0 3px rgba(14, 165, 233, 0.3);
        }
        
        /* Subtle border glow */
        .glow-border {
            position: relative;
        }
        
        .glow-border::after {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            border-radius: inherit;
            background: linear-gradient(45deg, #0ea5e9, #8b5cf6);
            z-index: -1;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .glow-border:hover::after {
            opacity: 0.4;
        }
    </style>
</head>
<body class="antialiased">
    <!-- Floating particles -->
    <div id="particles"></div>

    <div class="container mx-auto px-4 py-8 max-w-6xl">
        <!-- Floating Add Button (Mobile) -->
        <button id="mobileAddBtn" class="md:hidden fixed bottom-6 right-6 z-50 w-14 h-14 rounded-full bg-primary-600 text-white shadow-xl flex items-center justify-center floating-btn glow-border">
            <i class="fas fa-plus text-xl"></i>
        </button>

        <!-- Header with Gradient -->
        <header class="mb-10 text-center">
            <div class="inline-block px-6 py-2 rounded-full bg-white shadow-sm mb-4 glow-border">
                <span class="text-sm font-medium text-primary-600">PRODUCTIVITY TOOL</span>
            </div>
            <h1 class="text-5xl font-bold gradient-text mb-3">TaskMaster Pro</h1>
            <p class="text-lg text-gray-600 max-w-2xl mx-auto">Your ultimate to-do list with smart deadline management and productivity tracking</p>
            
            <div class="mt-6 flex justify-center space-x-3">
                <span class="px-4 py-1.5 bg-primary-100 text-primary-800 rounded-full text-sm font-medium flex items-center glow-border">
                    <i class="fas fa-clock mr-1.5"></i> Deadlines
                </span>
                <span class="px-4 py-1.5 bg-secondary-100 text-secondary-800 rounded-full text-sm font-medium flex items-center glow-border">
                    <i class="fas fa-flag mr-1.5"></i> Priorities
                </span>
                <span class="px-4 py-1.5 bg-purple-100 text-purple-800 rounded-full text-sm font-medium flex items-center glow-border">
                    <i class="fas fa-tags mr-1.5"></i> Categories
                </span>
            </div>
        </header>

        <!-- Main Grid Layout -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- Left Column (Add Task & Stats) -->
            <div class="lg:col-span-1 space-y-6">
                <!-- Add Task Card -->
                <div class="glass-card rounded-2xl shadow-lg overflow-hidden transition-all duration-300 transform hover:scale-[1.01] glow-border">
                    <div class="bg-gradient-to-r from-primary-600 to-secondary-500 p-5">
                        <h2 class="text-xl font-semibold text-white flex items-center">
                            <i class="fas fa-plus-circle mr-3"></i> Add New Task
                        </h2>
                    </div>
                    <form id="taskForm" class="p-5 space-y-4">
                        <div>
                            <label for="taskTitle" class="block text-sm font-medium text-gray-700 mb-1.5">Task Title</label>
                            <input type="text" id="taskTitle" class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus-effect focus:border-primary-400" placeholder="What needs to be done?" required>
                        </div>
                        
                        <div class="grid grid-cols-1 gap-4">
                            <div>
                                <label for="taskDeadline" class="block text-sm font-medium text-gray-700 mb-1.5">Deadline</label>
                                <input type="datetime-local" id="taskDeadline" class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus-effect focus:border-primary-400" required>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <label for="taskPriority" class="block text-sm font-medium text-gray-700 mb-1.5">Priority</label>
                                <div class="relative">
                                    <select id="taskPriority" class="w-full px-4 py-3 border border-gray-200 rounded-xl appearance-none focus:outline-none focus-effect focus:border-primary-400">
                                        <option value="low">Low</option>
                                        <option value="medium" selected>Medium</option>
                                        <option value="high">High</option>
                                    </select>
                                    <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700">
                                        <i class="fas fa-chevron-down"></i>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <label for="taskCategory" class="block text-sm font-medium text-gray-700 mb-1.5">Category</label>
                                <div class="relative">
                                    <select id="taskCategory" class="w-full px-4 py-3 border border-gray-200 rounded-xl appearance-none focus:outline-none focus-effect focus:border-primary-400">
                                        <option value="work">Work</option>
                                        <option value="personal">Personal</option>
                                        <option value="shopping">Shopping</option>
                                        <option value="other">Other</option>
                                    </select>
                                    <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700">
                                        <i class="fas fa-chevron-down"></i>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div>
                            <label for="taskReminder" class="block text-sm font-medium text-gray-700 mb-1.5">Reminder</label>
                            <div class="relative">
                                <select id="taskReminder" class="w-full px-4 py-3 border border-gray-200 rounded-xl appearance-none focus:outline-none focus-effect focus:border-primary-400">
                                    <option value="none">None</option>
                                    <option value="30min">30 minutes before</option>
                                    <option value="1hour">1 hour before</option>
                                    <option value="1day">1 day before</option>
                                </select>
                                <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700">
                                    <i class="fas fa-chevron-down"></i>
                                </div>
                            </div>
                        </div>
                        
                        <div>
                            <label for="taskNotes" class="block text-sm font-medium text-gray-700 mb-1.5">Notes</label>
                            <textarea id="taskNotes" rows="2" class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus-effect focus:border-primary-400" placeholder="Additional details..."></textarea>
                        </div>
                        
                        <div class="pt-2">
                            <button type="submit" class="w-full px-6 py-3 bg-gradient-to-r from-primary-600 to-secondary-500 text-white rounded-xl font-medium hover:opacity-90 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 transition-all glow-border">
                                <i class="fas fa-plus mr-2"></i> Add Task
                            </button>
                        </div>
                    </form>
                </div>

                <!-- Statistics Cards -->
                <div class="space-y-4">
                    <div class="glass-card rounded-2xl p-5 shadow-lg glow-border">
                        <h3 class="text-lg font-semibold text-gray-800 mb-4 flex items-center">
                            <i class="fas fa-chart-pie text-primary-600 mr-2"></i> Productivity Stats
                        </h3>
                        
                        <div class="space-y-4">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <div class="p-2 bg-primary-100 rounded-lg mr-3">
                                        <i class="fas fa-tasks text-primary-600"></i>
                                    </div>
                                    <div>
                                        <p class="text-sm text-gray-500">Total Tasks</p>
                                        <h3 class="text-xl font-semibold" id="totalTasks">0</h3>
                                    </div>
                                </div>
                                <div class="text-primary-600">
                                    <i class="fas fa-layer-group text-2xl"></i>
                                </div>
                            </div>
                            
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <div class="p-2 bg-yellow-100 rounded-lg mr-3">
                                        <i class="fas fa-clock text-yellow-600"></i>
                                    </div>
                                    <div>
                                        <p class="text-sm text-gray-500">Pending</p>
                                        <h3 class="text-xl font-semibold" id="pendingTasks">0</h3>
                                    </div>
                                </div>
                                <div class="text-yellow-600">
                                    <i class="fas fa-hourglass-half text-2xl"></i>
                                </div>
                            </div>
                            
                            <div class="flex items-center justify-between">
                                <div class="flex items-center">
                                    <div class="p-2 bg-green-100 rounded-lg mr-3">
                                        <i class="fas fa-check-circle text-green-600"></i>
                                    </div>
                                    <div>
                                        <p class="text-sm text-gray-500">Completed</p>
                                        <h3 class="text-xl font-semibold" id="completedTasks">0</h3>
                                    </div>
                                </div>
                                <div class="text-green-600">
                                    <i class="fas fa-check-double text-2xl"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Upcoming Deadlines -->
                    <div class="glass-card rounded-2xl shadow-lg overflow-hidden glow-border">
                        <div class="bg-gradient-to-r from-primary-600 to-secondary-500 p-5">
                            <h3 class="text-lg font-semibold text-white flex items-center">
                                <i class="fas fa-calendar-day mr-3"></i> Upcoming Deadlines
                            </h3>
                        </div>
                        <div id="upcomingDeadlines" class="divide-y divide-gray-100">
                            <!-- Upcoming deadlines will be added here dynamically -->
                            <div class="p-5 text-center text-gray-500">
                                <i class="fas fa-calendar-check text-3xl mb-2 text-gray-300"></i>
                                <p>No upcoming deadlines</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Column (Task List) -->
            <div class="lg:col-span-2 space-y-6">
                <!-- Task Filters -->
                <div class="glass-card rounded-2xl p-5 shadow-lg glow-border">
                    <div class="flex flex-wrap items-center justify-between">
                        <div class="flex space-x-2 mb-3 md:mb-0">
                            <button id="filterAll" class="filter-btn active px-4 py-1.5 bg-primary-600 text-white rounded-xl text-sm font-medium flex items-center glow-border">
                                <i class="fas fa-list mr-1.5"></i> All
                            </button>
                            <button id="filterActive" class="filter-btn px-4 py-1.5 bg-gray-100 text-gray-700 rounded-xl text-sm font-medium flex items-center hover:bg-gray-200 glow-border">
                                <i class="fas fa-spinner mr-1.5"></i> Active
                            </button>
                            <button id="filterCompleted" class="filter-btn px-4 py-1.5 bg-gray-100 text-gray-700 rounded-xl text-sm font-medium flex items-center hover:bg-gray-200 glow-border">
                                <i class="fas fa-check-circle mr-1.5"></i> Completed
                            </button>
                        </div>
                        <div class="relative">
                            <select id="sortTasks" class="pl-3 pr-8 py-1.5 border border-gray-200 rounded-xl text-sm focus:outline-none focus-effect focus:border-primary-400 appearance-none glow-border">
                                <option value="deadline-asc">Deadline (Soonest)</option>
                                <option value="deadline-desc">Deadline (Latest)</option>
                                <option value="priority">Priority</option>
                                <option value="added">Recently Added</option>
                            </select>
                            <div class="pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700">
                                <i class="fas fa-chevron-down text-xs"></i>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Task List -->
                <div class="glass-card rounded-2xl shadow-lg overflow-hidden glow-border">
                    <div class="bg-gradient-to-r from-primary-600 to-secondary-500 p-5">
                        <div class="flex justify-between items-center">
                            <h3 class="text-lg font-semibold text-white flex items-center">
                                <i class="fas fa-tasks mr-3"></i> Your Tasks
                            </h3>
                            <div class="text-sm text-primary-100" id="currentFilter">Showing all tasks</div>
                        </div>
                    </div>
                    
                    <div id="taskList" class="divide-y divide-gray-100 max-h-[600px] overflow-y-auto">
                        <!-- Tasks will be added here dynamically -->
                        <div class="p-8 text-center text-gray-500" id="emptyState">
                            <i class="fas fa-clipboard-list text-5xl mb-4 text-gray-300"></i>
                            <h4 class="text-lg font-medium text-gray-400 mb-1">No tasks yet</h4>
                            <p class="max-w-xs mx-auto">Add your first task using the form on the left</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Create floating particles
            function createParticles() {
                const particlesContainer = document.getElementById('particles');
                const particleCount = 20;
                
                for (let i = 0; i < particleCount; i++) {
                    const particle = document.createElement('div');
                    particle.classList.add('particle');
                    
                    // Random size between 2px and 5px
                    const size = Math.random() * 3 + 2;
                    particle.style.width = `${size}px`;
                    particle.style.height = `${size}px`;
                    
                    // Random position
                    particle.style.left = `${Math.random() * 100}%`;
                    particle.style.top = `${Math.random() * 100}%`;
                    
                    // Random animation duration between 10s and 20s
                    const duration = Math.random() * 10 + 10;
                    particle.style.animationDuration = `${duration}s`;
                    
                    // Random delay
                    particle.style.animationDelay = `${Math.random() * 10}s`;
                    
                    particlesContainer.appendChild(particle);
                }
            }
            
            createParticles();

            // DOM Elements
            const taskForm = document.getElementById('taskForm');
            const taskList = document.getElementById('taskList');
            const emptyState = document.getElementById('emptyState');
            const filterAll = document.getElementById('filterAll');
            const filterActive = document.getElementById('filterActive');
            const filterCompleted = document.getElementById('filterCompleted');
            const sortTasks = document.getElementById('sortTasks');
            const upcomingDeadlines = document.getElementById('upcomingDeadlines');
            const totalTasksElement = document.getElementById('totalTasks');
            const pendingTasksElement = document.getElementById('pendingTasks');
            const completedTasksElement = document.getElementById('completedTasks');
            const currentFilter = document.getElementById('currentFilter');
            const mobileAddBtn = document.getElementById('mobileAddBtn');

            // Task array
            let tasks = JSON.parse(localStorage.getItem('tasks')) || [];
            
            // Initialize the app
            updateTaskList();
            updateTaskStats();
            updateUpcomingDeadlines();
            
            // Form submission
            taskForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const title = document.getElementById('taskTitle').value;
                const deadline = document.getElementById('taskDeadline').value;
                const priority = document.getElementById('taskPriority').value;
                const category = document.getElementById('taskCategory').value;
                const reminder = document.getElementById('taskReminder').value;
                const notes = document.getElementById('taskNotes').value;
                
                const newTask = {
                    id: Date.now(),
                    title,
                    deadline,
                    priority,
                    category,
                    reminder,
                    notes,
                    completed: false,
                    createdAt: new Date().toISOString()
                };
                
                tasks.push(newTask);
                saveTasks();
                updateTaskList();
                updateTaskStats();
                updateUpcomingDeadlines();
                
                // Reset form
                taskForm.reset();
                document.getElementById('taskTitle').focus();
                
                // Show notification
                showNotification('Task added successfully!', 'success');
            });
            
            // Mobile add button
            mobileAddBtn.addEventListener('click', function() {
                document.getElementById('taskTitle').scrollIntoView({ behavior: 'smooth' });
                document.getElementById('taskTitle').focus();
            });
            
            // Filter buttons
            filterAll.addEventListener('click', function() {
                setActiveFilter('all');
                updateTaskList();
            });
            
            filterActive.addEventListener('click', function() {
                setActiveFilter('active');
                updateTaskList();
            });
            
            filterCompleted.addEventListener('click', function() {
                setActiveFilter('completed');
                updateTaskList();
            });
            
            // Sort tasks
            sortTasks.addEventListener('change', function() {
                updateTaskList();
            });
            
            // Set active filter
            function setActiveFilter(filter) {
                filterAll.classList.remove('active', 'bg-primary-600', 'text-white');
                filterActive.classList.remove('active', 'bg-primary-600', 'text-white');
                filterCompleted.classList.remove('active', 'bg-primary-600', 'text-white');
                
                filterAll.classList.add('bg-gray-100', 'text-gray-700');
                filterActive.classList.add('bg-gray-100', 'text-gray-700');
                filterCompleted.classList.add('bg-gray-100', 'text-gray-700');
                
                if (filter === 'all') {
                    filterAll.classList.add('active', 'bg-primary-600', 'text-white');
                    filterAll.classList.remove('bg-gray-100', 'text-gray-700');
                    currentFilter.textContent = 'Showing all tasks';
                } else if (filter === 'active') {
                    filterActive.classList.add('active', 'bg-primary-600', 'text-white');
                    filterActive.classList.remove('bg-gray-100', 'text-gray-700');
                    currentFilter.textContent = 'Showing active tasks';
                } else if (filter === 'completed') {
                    filterCompleted.classList.add('active', 'bg-primary-600', 'text-white');
                    filterCompleted.classList.remove('bg-gray-100', 'text-gray-700');
                    currentFilter.textContent = 'Showing completed tasks';
                }
            }
            
            // Update task list
            function updateTaskList() {
                let filteredTasks = [...tasks];
                const activeFilter = document.querySelector('.filter-btn.active').id;
                
                // Apply filter
                if (activeFilter === 'filterActive') {
                    filteredTasks = filteredTasks.filter(task => !task.completed);
                } else if (activeFilter === 'filterCompleted') {
                    filteredTasks = filteredTasks.filter(task => task.completed);
                }
                
                // Apply sorting
                const sortValue = sortTasks.value;
                filteredTasks.sort((a, b) => {
                    if (sortValue === 'deadline-asc') {
                        return new Date(a.deadline) - new Date(b.deadline);
                    } else if (sortValue === 'deadline-desc') {
                        return new Date(b.deadline) - new Date(a.deadline);
                    } else if (sortValue === 'priority') {
                        const priorityOrder = { high: 3, medium: 2, low: 1 };
                        return priorityOrder[b.priority] - priorityOrder[a.priority];
                    } else if (sortValue === 'added') {
                        return new Date(b.createdAt) - new Date(a.createdAt);
                    }
                    return 0;
                });
                
                // Clear task list
                taskList.innerHTML = '';
                
                if (filteredTasks.length === 0) {
                    emptyState.style.display = 'block';
                } else {
                    emptyState.style.display = 'none';
                    
                    filteredTasks.forEach(task => {
                        const taskElement = createTaskElement(task);
                        taskList.appendChild(taskElement);
                    });
                }
            }
            
            // Create task element
            function createTaskElement(task) {
                const taskElement = document.createElement('div');
                taskElement.className = `p-5 task-card ${task.completed ? 'bg-gray-50' : 'bg-white'}`;
                taskElement.dataset.id = task.id;
                
                // Check if deadline is approaching (within 24 hours)
                const now = new Date();
                const deadlineDate = new Date(task.deadline);
                const timeDiff = deadlineDate - now;
                const hoursDiff = timeDiff / (1000 * 60 * 60);
                
                const isUrgent = !task.completed && hoursDiff > 0 && hoursDiff < 24;
                const isOverdue = !task.completed && timeDiff < 0;
                
                // Priority colors
                const priorityColors = {
                    high: 'red',
                    medium: 'yellow',
                    low: 'green'
                };
                
                // Category icons and colors
                const categoryData = {
                    work: { icon: 'briefcase', color: 'blue' },
                    personal: { icon: 'user', color: 'purple' },
                    shopping: { icon: 'shopping-cart', color: 'green' },
                    other: { icon: 'tasks', color: 'gray' }
                };
                
                // Task HTML
                taskElement.innerHTML = `
                    <div class="flex items-start">
                        <div class="flex items-center h-5 mr-4 mt-1">
                            <input type="checkbox" ${task.completed ? 'checked' : ''} 
                                class="custom-checkbox complete-task" 
                                data-id="${task.id}">
                        </div>
                        <div class="flex-1 min-w-0">
                            <div class="flex justify-between items-start">
                                <div class="pr-4">
                                    <p class="text-base font-medium ${task.completed ? 'line-through text-gray-400' : 'text-gray-800'}">
                                        ${task.title}
                                    </p>
                                    <div class="mt-2 flex flex-wrap items-center text-sm text-gray-500 space-x-4">
                                        <span class="flex items-center">
                                            <span class="w-5 h-5 rounded-full bg-${categoryData[task.category].color}-100 text-${categoryData[task.category].color}-600 flex items-center justify-center mr-1.5">
                                                <i class="fas fa-${categoryData[task.category].icon} text-xs"></i>
                                            </span>
                                            ${task.category.charAt(0).toUpperCase() + task.category.slice(1)}
                                        </span>
                                        <span class="flex items-center">
                                            <i class="far fa-calendar-alt mr-1.5"></i>
                                            ${formatDateTime(task.deadline)}
                                        </span>
                                        ${task.reminder !== 'none' ? `
                                        <span class="flex items-center">
                                            <i class="far fa-bell mr-1.5"></i>
                                            ${task.reminder}
                                        </span>
                                        ` : ''}
                                    </div>
                                    ${task.notes ? `
                                    <div class="mt-3 p-3 bg-gray-50 rounded-lg">
                                        <p class="text-sm text-gray-600">${task.notes}</p>
                                    </div>
                                    ` : ''}
                                </div>
                                <div class="flex items-center space-x-3">
                                    <span class="px-3 py-1 text-xs rounded-full bg-${priorityColors[task.priority]}-100 text-${priorityColors[task.priority]}-800 font-medium">
                                        ${task.priority.charAt(0).toUpperCase() + task.priority.slice(1)}
                                    </span>
                                    <button class="delete-task text-gray-400 hover:text-red-500 transition-colors" data-id="${task.id}">
                                        <i class="fas fa-trash-alt"></i>
                                    </button>
                                </div>
                            </div>
                            ${isUrgent || isOverdue ? `
                            <div class="mt-3 flex items-center text-sm ${isOverdue ? 'text-red-600' : 'text-yellow-600'}">
                                <i class="fas fa-exclamation-triangle mr-2"></i>
                                ${isOverdue ? 'Deadline passed!' : 'Deadline approaching!'}
                                <span class="ml-2 font-medium">${formatTimeRemaining(deadlineDate)}</span>
                            </div>
                            ` : ''}
                        </div>
                    </div>
                `;
                
                // Add urgent class if needed
                if (isUrgent) {
                    taskElement.classList.add('urgent-task');
                } else if (isOverdue) {
                    taskElement.classList.add('border-l-4', 'border-red-500');
                }
                
                // Add event listeners
                const completeCheckbox = taskElement.querySelector('.complete-task');
                completeCheckbox.addEventListener('change', function() {
                    toggleTaskComplete(task.id);
                });
                
                const deleteButton = taskElement.querySelector('.delete-task');
                deleteButton.addEventListener('click', function() {
                    deleteTask(task.id);
                });
                
                return taskElement;
            }
            
            // Toggle task completion
            function toggleTaskComplete(taskId) {
                tasks = tasks.map(task => {
                    if (task.id == taskId) {
                        return { ...task, completed: !task.completed };
                    }
                    return task;
                });
                
                saveTasks();
                updateTaskList();
                updateTaskStats();
                updateUpcomingDeadlines();
                
                const task = tasks.find(t => t.id == taskId);
                const message = task.completed ? 'Task marked as complete!' : 'Task marked as active';
                showNotification(message, 'success');
            }
            
            // Delete task
            function deleteTask(taskId) {
                if (confirm('Are you sure you want to delete this task?')) {
                    tasks = tasks.filter(task => task.id != taskId);
                    saveTasks();
                    updateTaskList();
                    updateTaskStats();
                    updateUpcomingDeadlines();
                    showNotification('Task deleted successfully!', 'success');
                }
            }
            
            // Update task statistics
            function updateTaskStats() {
                totalTasksElement.textContent = tasks.length;
                const pending = tasks.filter(task => !task.completed).length;
                const completed = tasks.filter(task => task.completed).length;
                pendingTasksElement.textContent = pending;
                completedTasksElement.textContent = completed;
            }
            
            // Update upcoming deadlines
            function updateUpcomingDeadlines() {
                const now = new Date();
                const upcoming = tasks
                    .filter(task => !task.completed)
                    .sort((a, b) => new Date(a.deadline) - new Date(b.deadline))
                    .slice(0, 3);
                
                upcomingDeadlines.innerHTML = '';
                
                if (upcoming.length === 0) {
                    upcomingDeadlines.innerHTML = `
                        <div class="p-5 text-center text-gray-500">
                            <i class="fas fa-calendar-check text-3xl mb-2 text-gray-300"></i>
                            <p>No upcoming deadlines</p>
                        </div>
                    `;
                    return;
                }
                
                upcoming.forEach(task => {
                    const deadlineDate = new Date(task.deadline);
                    const timeDiff = deadlineDate - now;
                    const daysDiff = Math.ceil(timeDiff / (1000 * 60 * 60 * 24));
                    
                    const deadlineItem = document.createElement('div');
                    deadlineItem.className = 'p-5 hover:bg-gray-50 transition-colors flex items-center justify-between';
                    
                    deadlineItem.innerHTML = `
                        <div class="flex items-center">
                            <div class="w-10 h-10 rounded-lg bg-primary-100 text-primary-600 flex items-center justify-center mr-4">
                                <i class="fas fa-calendar-alt"></i>
                            </div>
                            <div>
                                <p class="font-medium ${daysDiff <= 0 ? 'text-red-600' : 'text-gray-800'}">${task.title}</p>
                                <p class="text-sm text-gray-500">${formatDateTime(task.deadline)}</p>
                            </div>
                        </div>
                        <div>
                            <span class="text-sm font-medium ${daysDiff <= 0 ? 'text-red-600' : daysDiff <= 3 ? 'text-yellow-600' : 'text-primary-600'}">
                                ${daysDiff <= 0 ? 'Today' : daysDiff === 1 ? 'Tomorrow' : `${daysDiff} days left`}
                            </span>
                        </div>
                    `;
                    
                    upcomingDeadlines.appendChild(deadlineItem);
                });
            }
            
            // Save tasks to localStorage
            function saveTasks() {
                localStorage.setItem('tasks', JSON.stringify(tasks));
            }
            
            // Format date and time
            function formatDateTime(dateTimeString) {
                const date = new Date(dateTimeString);
                return date.toLocaleString('en-US', {
                    month: 'short',
                    day: 'numeric',
                    year: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });
            }
            
            // Format time remaining
            function formatTimeRemaining(deadlineDate) {
                const now = new Date();
                const timeDiff = deadlineDate - now;
                
                if (timeDiff <= 0) {
                    return 'Overdue';
                }
                
                const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
                const hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / (1000 * 60));
                
                if (days > 0) {
                    return `${days}d ${hours}h left`;
                } else if (hours > 0) {
                    return `${hours}h ${minutes}m left`;
                } else {
                    return `${minutes}m left`;
                }
            }
            
            // Show notification
            function showNotification(message, type) {
                const notification = document.createElement('div');
                notification.className = `fixed top-4 right-4 px-4 py-3 rounded-xl shadow-lg text-white ${
                    type === 'success' ? 'bg-green-500' : 'bg-red-500'
                } z-50 transform transition-all duration-300 translate-x-full flex items-center`;
                
                notification.innerHTML = `
                    <i class="fas ${type === 'success' ? 'fa-check-circle' : 'fa-exclamation-circle'} mr-3 text-lg"></i>
                    <span>${message}</span>
                `;
                
                document.body.appendChild(notification);
                
                setTimeout(() => {
                    notification.classList.remove('translate-x-full');
                    notification.classList.add('translate-x-0');
                }, 10);
                
                setTimeout(() => {
                    notification.classList.remove('translate-x-0');
                    notification.classList.add('translate-x-full');
                    setTimeout(() => {
                        notification.remove();
                    }, 300);
                }, 3000);
            }
        });
    </script>
</body>
</html>
